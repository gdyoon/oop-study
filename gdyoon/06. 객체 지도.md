# 객체 지도


:star: 6장 목표: 기능이 아닌 구조를 바탕으로 시스템을 분할하는 객체지향의 또 다른 측면에 관해 이해하기

<br>

**여행 중에 다른 마을로 이동 할 때?**

1. 지나가는 사람에게 마을까지 가는 길 물어보기
   * 기능적이고 해결책 지향적인 접근법 (functional, solution-directed approach)
   * 일반적이지 않고 재사용이 어려움
   * 랜드마크가 없는 경우 경로 설명이 어려움
2. 지도를 통해 찾아가기
   * 구조적이고 문제 지향적인 접근법 (structural, problem-directed approach)
   * 풍부한 컨텍스트 정보가 함축
   * 모든 정보가 있기 때문에 랜드마크를 별도로 설정 할 필요 없음
   * 필요한 주변 지형을 추상적으로 표현하고 있음

> 첫번째 방법은 현재의 요구만을 만족 할 수 있으나, 두번째 방법은 다양한 목적을 위해 재사용 가능 <br>
> 지도는 잘 변하지 않는 지형 정보를 기반으로 하기 때문에 요구사항이 변해도 수용 가능함

*즉, 구조를 기반으로 모델을 구축하는 편이 좀 더 범용적이고 이해하기 쉬우며 변경에 안정적임*

<br>

* 지도: 안정적인 구조를 중심으로 기능을 종속시키는 접근법 (범용적)
* 물어보기: 기능에 구조를 종속시키는 방법 (국소적)

<br>

### 기능 설계 대 구조 설계

제품 설계에는 기능, 구조 측면의 설계 2가지가 존재한다. <br>

* 기능 측면의 설계: 제품이 사용자를 위해 무엇을 할 수 있는지 초점을 맞추는 것
* 구조 측면의 설계: 제품의 형태가 어떠해야 하는지에 초점을 맞추는 것

*두 가지 모두 조화를 이루어 설계를 하는 것이 중요 (쉽진 않겠지만)* <br><br>

**소프트웨어?**
* 사용자에게 훌륭한 기능을 제공하는 것이 1차적인 목적
* 기능은 충분조건이고 구조는 필요조건임

좋은 설계가 중요한 이유? 요구 사항이 항상 변하기 때문 <br>

> *"우리는 미래에 대해 얘기할 수 있고, 놀 수 있고, 추측할 수 있고, 깊이 생각해볼 수 있으며, 이론과 모형을 구축하고 이에 영향을 미치는 정량 데이터를 수집할 수 있지만 미래를 전혀 알지 못한다"* - 워런 웨이거(Warren Wagar) <br><br>
> 즉, 미래의 변경에 대비는 할 수 있지만 미래의 변경은 예측 할 수 없다.

변경을 예측하는 것이 아니라, 수용 할 수 있는 선택의 여지를 설계에 마련해놓는 것이 중요하다. <br><br>

**기능 분해 접근 방법 (functional decomposition)**
* 자주 변경되는 기능을 중심으로 설계한 후 구조가 기능에 따르게 하는 방법
* 전통적인 기능 분해 방법으로 변경에 취약함
* 시스템 기능은 더 작은 기능으로 분해되고 각 기능은 서로 밀접하게 관련된 하나의 덩어리를 이룸
* 기능이 변경될 경우 소프트웨어가 전체적으로 요동치게 됨

**객체 지향 접근 방법**
* 시스템의 기능을 객체 간의 책임으로 분배하는 방법
* 객체의 구조에 집중하고 기능이 객체의 구조를 따르게 함
* 시스템 기능은 더 작은 책임으로 분할되고 적절한 객체에게 분배됨
* 기능이 변경되더라도 객체 간 구조가 유지되므로 소프트웨어가 안정적임


### 두 가지 재료: 기능과 구조
* 구조는 사용자나 이해관계자들이 도메인에 관해 생각하는 개념과 개념들 간의 관계로 표현
* 기능은 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현

유즈케이스 모델링: 기능을 수집하고 표현하기 위한 기법 <br>
도메인 모델링: 구조를 수집하고 표현하기 위한 기법 <br>

### 안정적인 재료: 구조
#### 도메인 모델

* 도메인: 사용자가 프로그램을 사용하는 대상 분야를 의미 (사용자는 자신이 관심을 갖는 특정 분야의 문제 해결을 위해 소프트웨어 사용)
* 모델: 대상을 단순화하고 추상화한 것으로 관련 없는 세부사항에 대하여 무시
* 도메인 모델: 사용자가 프로그램을 사용하는 대상 영역에 관한 지식을 선택적으로 단순화하고 의식적으로 구조화한 형태

**도메인의 예시** <br>

|대상 영역|사용자|모델|
|:---|:---|:---|
|은행|은행 업무 종사자|고객과 계좌 사이의 돈의 흐름|
|자동차|중고 자동차 판매상|구매되는 자동차와 판매되는 자동차의 교환|
|게임|게임 플레이어|캐릭터와 몬스터, 몬트서가 떨구는 아이템 간의 관계로 파악|
|프로그래밍|프로그래밍 종사자|커피를 입력으로 코드를 출력하는 함수로 파악|

멘탈 모델(Mental Model): 사람들이 자기 자신, 다른 사람, 환경, 자신이 상호작용하는 사물들에 대해 갖는 모형 <br><br>


### 도메인의 모습을 담을 수 있는 객체지향

* 객체 지향은 실체를 시스템 안의 객체로 재창조 할 수 있게 해줌
* 객체지향 패러다임은 사용자 관점, 설계자 관점, 코드 모습 모두를 유사한 형태로 유지할 수 있는 프로그래밍 기법
* 사용자 관점=사용자 모델, 설계자 관점=디자인 모델, 코드 모습=시스템 이미지 를 의미하는 것 같음)

*이러한 특징을 연결 완전성 또는 표현적 차이라고 함*

### 표현적 차이

* 표현적 차이: 소프트웨어 객체와 현실 객체 사이의 의미적 거리. 은유를 기반으로 재창조 했기 때문에 발생하는 차이 
* 은유 대상? 도메인 모델을 통해 표현되는 도메인 객체. 이를 통해 표현적 차이가 줄어들 것임
* 즉, 표현적 차이 = 도메인에 대한 이해 = 소프트웨어를 이해하고 수정하기 쉽게 만듦 


## 불안정한 재료: 기능
### 유스케이스

* 기능적 요구사항: 시스템이 사용자에게 제공해야 하는 기능의 목록을 정리한 것
* 유스케이스: 사용자와 시스템 간에 이뤄지는 상호작용의 흐름을 텍스트로 정리한 것

### 유스케이스의 특성

* 사용자와 시스템 간의 상호작용을 보여주는 텍스트이다
* 하나의 시나리오가 아니라 여러 시나리오들의 집합이다
* 단순한 기능(feature) 목록과 다르다 (기능 목록은 단순한 나열이지만, 유스케이스는 연관된 기능들을 함께 묶어 표현 가능)
* 사용자 인터페이스와 관련된 세부 정보를 포함하지 말아야 한다 (사용자의 관점에 초점)
* 내부 설계와 관련된 정보를 포함하지 않는다 (시스템의 기능을 이야기 형식으로 모으는 것이기 때문)

## 재료 합치기: 기능과 구조의 통합
### 도메인 모델, 유스케이스, 그리고 책임-주도 설계

* 도메인 모델: 안정적인 구조를 개념화 하기 위함
* 유스케이스: 불안정한 기능을 서술하기 위해 사용되는 도구
* 책임-주도 설계: 유스케이스에 정리된 시스템의 기능을 도메인 모델 기반으로 한 객체들의 책임으로 분배

### 기능 변경을 흡수하는 안정적인 구조

* 도메인 모델을 기반으로 객체 구조를 설계하는 것
* 도메인 모델을 기반으로 기능을 구현할 경우 변경이 일어나도 핵심 정책이나 규칙이 변경되지 않음
* 연결 완정성: 도메인 모델링에서 사용한 객체, 개념을 프로그래밍의 객체, 클래스로 변환 가능
* 가역성: 연결 완정성의 반대말, 코드에서 모델로의 변환이 가능

## 정리하며

도메인 모델은 사람들의 머리속에 들어있는 멘탈 모델이다. 즉, 본인이 생각하는 어떤 모형을 의미하는데, <br>
이 개념이 중요한 이유는 도메인을 바탕으로 사람들 간 모델을 유추하고 공유함으로써 의사소통을 하기 때문이다. <br>
즉, 도메인 모델을 기반으로 한 시스템은 유지보수가 쉽고 유연한 객체지향 시스템을 만드는 토대이다.

