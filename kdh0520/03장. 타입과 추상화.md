# 3장. 타입과 추상화
**영국의 해리 벡(Harry Beck) 지하철 노선도**  
: '정확성'을 버리고 역 사이의 연결이라는 '목적'에 집중  
<br><br>

## 추상화를 통한 복잡성 극복  
* 추상화  
    - 불필요한 정보를 제거하고 이해하기 쉽고 단순하게 표현
    - 복잡한 현실을 단순화하기 위해 사용하는 인간의 가장 기본적인 인지 수단

* 추상화의 두 차원을 올바르게 이해하고 적용해야 함
    1. 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
    2. 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것  
<br><br>

## 객체지향과 추상화
### 모두 트럼프일 뿐
* 이상한 나라의 앨리스 이야기에 등장하는 다양한 인물들을 계급, 나이, 성격 등의 차이점은 무시하고 '트럼프'라는 유사성을 기반으로 추상화

<br>

### 그룹으로 나누어 단순화하기
* 객체
    - 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물  
    ex) 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 잭, 하트 왕과 하트 여왕 각 인물들에게는 다양한 측면에서 서로를 구별할 수 있는 독특한 특징이 있음
* '트럼프'라는 그룹으로 포함하여 나눌 수 있음
    - 떠오르는 일반적인 외형과 행동 방식을 지님
* '트럼프'와 '토끼'라는 두 그룹으로 나누어 복잡성을 효과적으로 감소시킴

<br>

### 개념
* 공통점을 기반으로 객체들을 분류하여 묶기 위한 것
* '트럼프'와 '토끼'라는 두 개의 개념으로 그룹을 분류
* 인스턴스 (instance)
    - 객체에 어떤 개념을 적용하는 것이 가능
    - 개념 그룹의 일원이 될 때 객체를 그 개념의 인스턴스라고 함
* **객체**란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미하고, 개념이 객체에 적용됐을 때 객체를 개념의 **인스턴스**라고 한다.

<br>

### 개념의 세 가지 관점
1. 심볼 (symbol) : 개념을 가리키는 간략한 이름이나 명칭  
ex) 트럼프
2. 내연 (intension) : 개념의 완전한 정의를 나타내며, 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다.  
ex) 몸이 납작하고 두 손과 두 발은 네모 귀퉁이에 달려 있는 등장인물
3. 외연 (extension) : 개념에 속하는 모든 객체의 집합(set)  
ex) 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 잭, 하트 왕과 하트 여왕

<br>

### 객체를 분류하기 위한 틀
* 분류
    - 객체에 특정한 개념을 적용하는 작업
    - 객체지향의 가장 중요한 개념 중 하나
* 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정
* 객체를 적절한 개념에 따라 분류하면, 유지보수가 용이하고 변경에 유연하게 대처할 수 있으며 개발자의 머릿속에 객체를 쉽게 찾고 조작할 수 있는 정신적인 지도를 제공

<br>

### 분류는 추상화를 위한 도구다
* 개념을 통해 객체를 분류하는 과정은 추상화의 두 가지 차원을 모두 사용
* 개념은 객체들의 복잡성을 극복하기 위한 추상화 도구

<br><br>

## 타입
### 타입은 개념이다
* 타입 (type)
    - 공통점을 기반으로 객체들을 묶기 위한 틀
 
<br>

### 데이터 타입
* 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터
* 타입 시스템 (type system)
    - 컴퓨터 안 데이터를 목적에 따라 분류하기 시작하면서 프로그래밍 언어 안에서 자라나기 시작함
    - 메모리 안에 저장된 0과 1에 대해 수행 가능한 작업과 불가능한 작업을 구분함으로써 데이터가 잘못 사용되는 것을 방지
    - 목적은 데이터가 잘못 사용되지 않도록 제약사항을 부과하는 것
* 타입에 관련된 두 가지 사실
    1. 타입은 데이터가 어떻게 사용되느냐에 관한 것이다.
    2. 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.

<br>

### 객체와 타입
* 객체에서 중요한 것은 객체의 행동
* 객체를 창조할 때 가장 중요하게 고려해야 하는 것은 객체가 이웃하는 객체와 협력하기 위해 어떤 행동을 해야 할 지를 결정하는 것
* 객체지향 설계에 대한 중요한 원칙을 이끄는 두 가지
    1. 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동이다.
    2. 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.

<br>

### 행동이 우선이다
* 객체의 내부 표현 방식이 다르더라도 어떤 객체들이 동일하게 행동한다면 그 객체들은 동일한 타입에 속한다.
* 다형성
    - 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력
* 캡슐화
    - 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춤
* 행동에 따라 객체를 분류하기 위해서는 객체가 내부적으로 관리해야 하는 데이터가 아니라 객체가 외부에 제공해야 하는 행동을 먼저 생각해야 한다.
* 책임-주도 설계 (Responsibility-Driven Design)
    - 객체가 외부에서 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후, 데이터를 책임 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화해야 한다.
    - 데이터-주도 설계 (Data-Driven Design) 방법의 단점을 개선하기 위해 고안

<br><br>

## 타입의 계층
### 트럼프 계층
* '트럼프 인간'은 '트럼프'의 일종이지만 일반적인 트럼프 카드보다 좀 더 특화된 행동을 하는 '트럼프'
* 이 두 개념 사이의 관계를 일반화/특수화 (generalization/specialization)

<br>

### 일반화/특수화 관계
* '트럼프'는 '트럼프 인간'을 포괄하는 좀 더 일반적인 개념
* '트럼프 인간' 타입에 속하는 객체는 동시에 '트럼프' 타입에도 속한다.
* 일반화/특수화 관계를 결정하는 것은 객체의 상태를 표현하는 데이터 x 행동 o
* 일반적인 타입은 특수한 타입에 비해 더 적은 수의 행동을 가지며 특수한 타입은 일반적인 타입에 비해 더 많은 행동을 가진다.
* 특수한 타입은 일반적인 타입이 할 수 있는 모든 행동을 동일하게 수행할 수 있어야 한다.
* 타입의 내연을 의미하는 행동의 가짓수와 외연을 의미하는 집합의 크기는 서로 반대

<br>

### 슈퍼타입과 서브타입
* 슈퍼타입 (suppertype)
    - 일반화/특수화 관계에서 일반적인 타입
* 서브타입 (subtype)
    - 일반화/특수화 관계에서 특수한 타입
* 서브타입은 슈퍼타입의 행위와 호환되기 때문에 서브타입은 슈퍼타입을 대체할 수 있어야 한다.
* 슈퍼타입의 행동은 서브타입에게 자동으로 상속된다.

<br>

### 일반화는 추상화를 위한 도구다
* 정원에 있던 등장인물들의 차이점은 배제하고 공통점만을 강조함으로써 이들을 공통의 타입인 '트럼프 인간'으로 분류했다는 것
* '트럼프 인간'을 좀 더 단순한 관점에서 바라보기 위해 불필요한 특성을 배제하고 좀 더 포괄적인 의미를 지닌 '트럼프'로 일반화했다는 것
* 객체지향 패러다임을 통해 세상을 바라보는 거의 대부분의 경우에 분류와 일반화/특수화 기법을 동시에 적용

<br><br>

## 정적 모델
### 타입의 목적
* 타입을 사용하는 이유
    - 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문
* 타입을 사용하면 동적으로 변하는 객체의 상태를 정적인 관점에서 표현할 수 있다.

<br>

### 그래서 결국 타입은 추상화다
* 어떤 시점에 앨리스에 관해 생각할 때 불필요한 시간이라는 요소와 상태 변화라는 요소를 제거하고 철저하게 정적인 관점에서 앨리스의 모습을 묘사하는 것을 가능하게 해준다.
* 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다.

<br>

### 동적 모델과 정적 모델
* 객체를 생각할 때 두 가지 모델 고려
    1. 스냅샷 (snapshot)
        - 객체가 특정 시점에 구체적으로 어떤 상태를 가지느냐
        - 객체지향 모델링을 위한 표준 언어인 UML에서 객체 다이어그램 (Object Diagram)이라고 불린다.
        - 동적 모델 (Dynamic Model) : 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것
    2. 타입 모델 (Type Model)
        - 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것
        - 정적 모델 (Static Model) : 동적으로 변하는 객체의 상태가 아니라 객체가 속한 타입의 정적인 모습을 표현
* 객체 관점의 동적 모델과 객체를 추상화한 타입 관점의 정적 모델을 적절히 혼용해야 한다.

<br>

### 클래스
* 객체지향 프로그래밍 언어에서 정적인 모델은 클래스를 이용해 구현된다.
* 타입을 구현하는 방법은 클래스를 이용하는 것
* 객체를 분류하는 기준은 **타입**이며, 타입을 나누는 기준은 객체가 수행하는 **행동**
* 객체지향에서 중요한 것은 동적으로 변하는 객체의 '상태'와 상태를 변경하는 '행위'
